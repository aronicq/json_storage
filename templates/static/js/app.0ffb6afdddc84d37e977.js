webpackJsonp([1],{"9M+g":function(t,e){},Jmt5:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("b-nav",{attrs:{tabs:""}},[e("b-nav-item",{attrs:{disabled:""}},[this._v("JSON-storage")])],1)},staticRenderFns:[]},o=n("VU/8")(null,i,!1,null,null,null).exports,a=n("Gu7T"),r=n.n(a),u=n("//Fk"),l=n.n(u),c={data:function(){return{lastFile:Object,files:[],textStatus:"",commonWeight:0}},props:{currJson:String},mounted:function(){this.requestFiles()},methods:{countCommonWeight:function(){var t=0;this.files.forEach(function(e){t+=e.data.length}),this.commonWeight=t},requestFiles:function(){var t=this;fetch("http://localhost:8000/json_storage/get/all/",{method:"GET"}).then(function(t){return t.json()}).then(function(t){return new l.a(function(e,n){var s=[];console.log(t);for(var i=0;i<t.length;i++){var o=t[i];s.push({name:o.fields.name+"(created: "+o.fields.date_of_creation+")",id:o.pk,data:o.fields.json_content})}e(s)})}).then(function(e){t.files=e,t.countCommonWeight()})},deleteFile:function(t,e){this.files.splice(e,1),fetch("http://localhost:8000/json_storage/delete/"+t.id),this.countCommonWeight()},emptyTextStatus:function(){this.textStatus=" "},getCookie:function(t){var e=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),s=0;s<n.length;s++){var i=n[s].trim();if(i.substring(0,t.length+1)===t+"="){e=decodeURIComponent(i.substring(t.length+1));break}}return e},dataToBackend:function(t){var e=this,n=new FormData,s=this.getCookie("csrftoken"),i=new Headers;i.append("x-CSRFtoken",s),n.append("json",t.json),n.append("name",t.name),fetch("http://localhost:8000/json_storage/add/",{method:"POST",headers:i,body:n}).then(function(t){console.log("file added"),e.files.length=0,e.requestFiles()})},addText:function(){this.isJson("t")?(console.log(this.currJson),this.dataToBackend({json:this.currJson,name:""})):this.textStatus="string is not json"},addFile:function(t){var e=this,n=t.dataTransfer.files;if(n){this.lastFile=n;this.isJson("f").then(function(t){var s;t[0]?((s=e.files).push.apply(s,r()(n)),e.dataToBackend({json:t[1],name:e.lastFile[0].name})):e.textStatus="file is not json"})}},getImagePreviews:function(){for(var t=this,e=function(e){var n=new FileReader;n.addEventListener("load",function(){this.$refs["filename"+parseInt(e)][0].src=n.result}.bind(t),!1),n.readAsDataURL(t.files[e])},n=0;n<this.files.length;n++)e(n)},changeJson:function(t){this.$emit("updateJson",t.target.value)},inputJsonVerifier:function(){this.isJson("t")?this.$refs.jsonInputArea.classList.add("right"):this.$refs.jsonInputArea.classList.add("wrong")},resetClass:function(){this.$refs.jsonInputArea.classList.remove("wrong"),this.$refs.jsonInputArea.classList.remove("right")},setFile:function(t,e){this.lastFile={json:t,name:e}},isJson:function(t){var e=this,n="";if("f"===t)return new l.a(function(t){var s=new FileReader;s.onload=function(e){n=s.result;try{JSON.parse(n)}catch(e){t([!1,s.result])}t([!0,s.result])},s.readAsText(e.lastFile[0])});if("t"===t){n=this.currJson;try{JSON.parse(n)}catch(t){return!1}return!0}}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("textarea",{ref:"jsonInputArea",staticStyle:{"text-align":"center",resize:"none"},attrs:{cols:"70",placeholder:"type or paste your JSON data",rows:"20"},on:{input:function(e){return e.preventDefault(),t.changeJson(e)},drop:function(e){return e.preventDefault(),t.addFile(e)},focusout:t.inputJsonVerifier,focusin:t.resetClass}}),t._v(" "),n("br"),t._v(" "),n("div",{on:{click:t.emptyTextStatus}},[t._v(" "+t._s(this.textStatus)+" ")]),t._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:t.addText}},[t._v("\n      Submit\n    ")]),t._v(" "),n("div",{staticClass:"weight"},[t._v(" "+t._s(this.commonWeight)+" bytes ")]),t._v(" "),t._l(t.files,function(e,s){return n("div",{key:s,staticClass:"file-listing"},[t._v("\n      "+t._s(e.name)+"\n      "),n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(n){return t.deleteFile(e,s)}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])])}),t._v(" "),n("br")],2)},staticRenderFns:[]};var f={name:"app",components:{Header:o,Body:n("VU/8")(c,d,!1,function(t){n("z0Ic")},null,null).exports},data:function(){return{currJson:""}},methods:{updateJson:function(t){this.currJson=t}}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Header"),this._v(" "),e("Body",{attrs:{currJson:this.currJson},on:{updateJson:this.updateJson}})],1)},staticRenderFns:[]},p=n("VU/8")(f,h,!1,null,null,null).exports,m=n("Tqaz");n("Jmt5"),n("9M+g");s.default.config.productionTip=!1,s.default.use(m.a),new s.default({el:"#app",components:{App:p},template:"<App/>"})},z0Ic:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.0ffb6afdddc84d37e977.js.map